<html>
    <head>
        <title>Davenport</title>
        <link rel="stylesheet" type="text/css" href="stylesheet.css">
    </head>
    <body>
        <p align="center">
            <img src="davenport.gif">
        <hr>
        <h3>Overview</h3>
        <p>
        Davenport is a servlet which provides a WebDAV gateway to SMB
        shared resources.  Typical usage would be to provide web-based
        read and write access to Windows shared drives.
        </p>
        <p>
        WebDAV clients, such as Windows' "Web Folders", can copy files to and
        from the shares over HTTP.  Non-WebDAV-capable web browsers can
        also access the network, downloading files from shared folders
        in a seamless fashion.
        </p>
        <p>
        Users access shared resources using their Windows domain username
        and password, so no account configuration is typically needed.
        When run over HTTPS, Davenport provides a secure means of
        accessing internal shared drives over the internet without
        requiring a VPN.
        </p>
        <h3>Obtaining Davenport</h3>
        <p>
        Davenport is free software, provided under the
        <a href="../license.txt">GNU Lesser General Public License</a>.
        It can be obtained from the Davenport SourceForge project site at:
        </p>
        <p>
        <a class="code" href="http://sourceforge.net/projects/davenport">http://sourceforge.net/projects/davenport</a>
        </p>
        <p>
        The download area (from which the software can be obtained directly)
        is at:
        </p>
        <p>
        <a class="code" href="http://sourceforge.net/project/showfiles.php?group_id=78146">http://sourceforge.net/project/showfiles.php?group_id=78146</a>
        </p>
        <p>
        Releases are distributed in both .zip and .tgz formats.
        </p>
        <h3>Getting Started</h3>
        <p>
        The Davenport binary is provided as a Java WAR file for installation
        in a Servlet container.  You should be able to deploy the WAR by
        copying it into the "webapps" directory under your container,
        or by following instructions provided in your Servlet container's
        documentation.
        </p>
        <p>
        After deploying the WAR file, you should be able to browse SMB
        resources.  To list the shares on an SMB server "smbserver", you
        would enter into your web browser:
        </p>
        <p class="code">
        http://webserver/davenport/smbserver/
        </p>
        <p>
        This will bring up the default directory listing, which will look
        something like this:
        </p>
        <p>
        <img src="directory.jpg">
        </p>
        <p>
        This will list all shares on the "smbserver" server; by clicking one
        of the shares, files will be listed, and so forth.
        </p>
        <p>
        Clicking the header link at the top of the screen (
        "smb://davhost/files/sample/" in the screenshot above)
        will reopen the item as a Web Folder in Internet Explorer:
        </p>
        <p>
        <img src="webfolder.jpg">
        </p>
        <p>
        You can drag and drop files to and from the Web Folder, create and
        delete directories, and perform other file operations.  You can
        open a URL as a Web Folder directly by using the "File -&gt; Open"
        menu in Internet Explorer, and selecting "Open as Web Folder".
        </p>
        <h3>Configuration</h3>
        <p>
        Configuration of Davenport is performed by editing the "web.xml"
        deployment descriptor.  The packaged descriptor contains commented
        configuration settings, and provides detailed descriptions of
        all available items.  Reviewing this file is recommended prior
        to deployment, as configuration items may change between releases.
        </p>
        <p>
        jCIFS environment options can be set via the Davenport servlet's
        deployment descriptor.  jCIFS settings of particular interest to the
        Davenport servlet are listed below.
        </p>
        <p>
        <table border="1">
        <tr>
            <th>Parameter</th><th>Description</th>
        </tr>
        <tr>
            <td class="code">jcifs.smb.client.domain</td>
            <td>Provides the default domain if not specified during HTTP
            Basic authentication.  If the user enters "username" rather
            than "DOMAIN&#92;username", this specifies the default domain
            against which the user should be authenticated.</td>
        </tr>
        <tr>
            <td class="code">jcifs.http.domainController</td>
            <td>Provides the IP address of the server used to authenticate
            clients.  This is only used for browsing the root
            ("<span class="code">smb://</span>") and workgroups.  For servers,
            shares, directories and files, the corresponding server is used.
            If not specified, the system will attempt to locate a controller
            for the domain specified in
            <span class="code">jcifs.smb.client.domain</span>.
            It is not necessary for this to specify a real domain controller;
            a workstation can be used.
        </tr>
        <tr>
            <td class="code">jcifs.http.enableBasic</td>
            <td>Enables/disables HTTP Basic authentication support.  This
            allows non-NTLM-capable browsers to successfully authenticate.
            NTLM-capable clients will authenticate using NTLM.  This defaults
            to <span class="code">true</span>.  Setting this to
            <span class="code">false</span> will disable HTTP Basic
            authentication entirely, allowing only NTLM-capable browsers to
            connect.
            </td>
        </tr>
        <tr>
            <td class="code">jcifs.http.insecureBasic</td>
            <td>Enables/disables HTTP Basic authentication over an insecure
            channel.  Normally, HTTP Basic authentication will only be
            available over HTTPS.  Setting this to
            <span class="code">true</span>
            will offer HTTP Basic authentication over insecure HTTP,
            sending login information over the network unencrypted.
            <b>This is a severe security risk, and is strongly advised
            against.</b> This defaults to <span class="code">false</span>.
            </td>
        </tr>
        <tr>
            <td class="code">jcifs.http.basicRealm</td>
            <td>Specifies the HTTP Basic realm that will be presented during
            authentication.  Defaults to "Davenport".</td>
        </tr>
        <tr>
            <td class="code">jcifs.smb.lmCompatibility</td>
            <td>
            Controls the NTLM authentication "level".  This setting mirrors the
            Windows <tt>LMCompatibilityLevel</tt> registry setting.  This is
            detailed in <a href="http://support.microsoft.com/default.aspx?scid=KB;en-us;239869">Microsoft Knowledge Base Article 239869</a>;
            it can be set to one of the following levels:
            <p>
            <table>
                <tr valign="top">
                    <th nowrap align="right">0 or 1</th>
                    <td>
                        Uses LM and NTLM authentication.  "0" is the default
                        setting, and is the most interoperable.  It is
                        less secure than higher levels, however.
                    </td>
                </tr>
                <tr valign="top">
                    <th nowrap align="right">2</th>
                    <td>
                        Uses NTLM authentication only.  This increases
                        security by removing the cryptographically weaker
                        LM authentication, at the expense of interoperability
                        with older domain controllers.
                    </td>
                </tr>
                <tr valign="top">
                    <th nowrap align="right">3, 4, or 5</th>
                    <td>
                        Uses LMv2 authentication only.  This offers
                        a higher level of security, but is not interoperable
                        with pre-Windows NT4 Service Pack 4 servers.
                    </td>
                </tr>
            </table>
            </td>
        </tr>
        <tr>
            <td class="code">jcifs.netbios.wins</td>
            <td>Specifies the IP address of the WINS server.  This is
            recommended if a WINS server is present; it is required when
            accessing hosts on different subnets.</td>
        </tr>
        <tr>
            <td class="code">jcifs.resolveOrder</td>
            <td>A comma-separated list of name resolution methods.  This
            specifies which hostname resolution methods will be used, and in
            what order.  Possible values (in default order) are LMHOSTS,
            WINS, BCAST, and DNS.</td>
        </tr>
        </table>
        </p>
        <p>
        Further details regarding configuration of the jCIFS environment can be
        found in the jCIFS documentation (available from
        <a href="http://jcifs.samba.org/">http://jcifs.samba.org</a>).
        </p>
        <p>
        Additionally, you can specify your own custom handlers for HTTP methods.
        By implementing the
        <a href="api/smbdav/MethodHandler.html" class="code">
        smbdav.MethodHandler</a> interface, you can provide your own behavior
        for GET, PUT, etc. requests.  To enable your handler, add an
        initialization parameter with the handler's classname.  For example:
        </p>
        <p>
        <pre>
    &lt;init-param&gt;
        &lt;param-name&gt;handler.GET&lt;/param-name&gt;
        &lt;param-value&gt;com.foo.MyGetHandler&lt;/param-value&gt;
    &lt;/init-param&gt;
        </pre>
        </p>
        <p>
        This will install a <span class="code">com.foo.MyGetHandler</span>
        instance as the handler for GET requests.
        </p>
        <p>
        The default GET handler also has configuration options which can be
        set in the Davenport initialization parameters:
        </p>
        <p>
        <table border="1">
        <tr>
            <th>Parameter</th><th>Description</th>
        </tr>
        <tr>
            <td class="code">directory.xsl</td>
            <td>
            Provides the location of the default directory view stylesheet.
            If a collection is accessed by a non-WebDAV-capable browser,
            an XSL stylesheet is used to present the directory listing
            in HTML.  The location of the default stylesheet is given here.
            <p>
            The default value,
            "<span class="code">/META-INF/directory.xsl</span>",
            is the default Davenport directory view (shown above).
            Davenport also ships with
            "<span class="code">/META-INF/dos.xsl</span>", a more nostalgic
            view (<a href="dos.jpg" target="image">screenshot</a>).
            </td>
        </tr>
        <tr>
            <td class="code">directory.configuration</td>
            <td>
            The location of the directory stylesheet configuration page
            can be specified using this parameter.  Clients can access the
            configuration page by pointing their browser at a collection and
            specifying "configure" as a URL parameter, i.e.:
            <p class="code">
            http://server/davenport/?configure
            </p>
            <p>
            This allows the user to select a preferred directory view
            stylesheet.
            </td>
        </tr>
        </table>
        </p>
        <p>
        For more details on configuring the GET handler, see
        <a href="api/smbdav/DefaultGetHandler.html">the API documentation
        for the <span class="code">smbdav.DefaultGetHandler</span> class</a>.
        </p>
        <h3>Compiling From Sources</h3>
        <p>
        Davenport is built using Apache Ant, available at
        <a href="http://ant.apache.org/">http://ant.apache.org</a>.
        Build targets are:
        </p>
        <p>
        <table border="1">
        <tr>
            <th>Target</th><th>Description</th>
        </tr>
        <tr>
            <td class="code">dependencies</td>
            <td>
            Checks that all class dependencies are met.
            </td>
        </tr>
        <tr>
            <td class="code">compile</td>
            <td>
            Builds the Davenport classes.
            </td>
        </tr>
        <tr>
            <td class="code">jar</td>
            <td>
            Packages the Davenport classes into a .jar file.
            </td>
        </tr>
        <tr>
            <td class="code">war</td>
            <td>
            Packages the Davenport application into a .war file for deployment.
            </td>
        </tr>
        <tr>
            <td class="code">javadoc</td>
            <td>
            Creates the Javadoc API documentation.
            </td>
        </tr>
        <tr>
            <td class="code">all</td>
            <td>
            Performs all of the above.
            </td>
        </tr>
        <tr>
            <td class="code">clean</td>
            <td>
            Removes build artifacts.
            </td>
        </tr>
        <tr>
            <td class="code">allclean</td>
            <td>
            Removes distribution and build artifacts.  This includes the .jar
            and .war files, .class files, and the Javadoc API documentation.
            </td>
        </tr>
        <tr>
            <td class="code">davenport</td>
            <td>
            Builds the "all" target, followed by "clean".  This reproduces
            the distribution package contents.
            </td>
        </tr>
        <tr>
            <td class="code">distrib</td>
            <td>
            Builds the "davenport" target, and additionally recreates the
            .zip and .tgz downloadable distributions.
            </td>
        </tr>
        <tr>
            <td class="code">checksum</td>
            <td>
            Creates MD5 checksums of the .zip and .tgz distributions
            (Ant 1.5 or higher).
            </td>
        </tr>
        <tr>
            <td class="code">usage</td>
            <td>
            Displays a list of the available targets.
            </td>
        </tr>
        </table>
        </p>
        <p>
        Building Davenport may require that you add dependencies to the Ant
        classpath.  The build process will inform you which APIs could not
        be located.  Currently, Davenport requires implementations of the
        following APIs:
        </p>
        <p>
        <ul>
            <li>The Java Servlet API</li>
            <li>The Java API for XML Processing (both an XML parser and
            an XSLT transformer implementation)</li>
        </ul>
        </p>
        <p>
        The jCIFS library, version 0.7.11 or higher, is also required.  This
        library is bundled with Davenport, and can also be obtained from the
        jCIFS web site
        (<a href="http://jcifs.samba.org/">http://jcifs.samba.org</a>).
        </p>
        <h3>Technical Resources</h3>
        <a href="api/index.html">API Documentation</a><br>
        <a href="rfc2518.txt">HTTP Extensions for Distributed Authoring -- WEBDAV (RFC 2518)</a><br>
        <a href="draft-crhertel-smb-url-04.txt">SMB Filesharing URL Scheme (Internet-Draft)</a><br>
        <a href="ntlm.html">The NTLM Authentication Protocol</a><br>
    </body>
</html>
